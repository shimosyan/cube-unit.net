vars:
  env: Staging
exec:
  build-hugo:
    - when: ExitCode != 0
      template: |
        ## {{template "status" .}} Build Failed ({{.Vars.env}})

        {{template "link" .}}

        {{template "join_command" .}}

        {{template "hidden_combined_output" .}}

  deploy-to-s3:
    - when: ExitCode == 0
      template: |
        ## {{template "status" .}} Deploy Succeeded ({{.Vars.env}})

        {{template "link" .}}

        {{template "join_command" .}}

        {{template "hidden_combined_output" .}}
    - when: ExitCode != 0
      template: |
        ## {{template "status" .}} Deploy Failed ({{.Vars.env}})

        {{template "link" .}}

        {{template "join_command" .}}

        {{template "hidden_combined_output" .}}
