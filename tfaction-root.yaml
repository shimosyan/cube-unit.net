plan_workflow_name: terraform-pull-request

tflint:
  enabled: true
  fix: true
trivy:
  enabled: true

target_groups:
#
# AWS
#
  - working_directory: terraform/aws/cube-unit.net
    target: terraform/aws/cube-unit.net
    aws_region: ap-northeast-1
    terraform_plan_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_plan
    terraform_apply_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_apply

  - working_directory: terraform/aws/stg.cube-unit.net
    target: terraform/aws/stg.cube-unit.net
    aws_region: ap-northeast-1
    terraform_plan_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_plan
    terraform_apply_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_apply

  - working_directory: terraform/aws/img.cube-unit.net
    target: terraform/aws/img.cube-unit.net
    aws_region: ap-northeast-1
    terraform_plan_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_plan
    terraform_apply_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_apply

  - working_directory: terraform/aws/static.cube-unit.net
    target: terraform/aws/static.cube-unit.net
    aws_region: ap-northeast-1
    terraform_plan_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_plan
    terraform_apply_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_apply

#
# Cloudflare
#
  - working_directory: terraform\cloudflare\cube-unit.net\domain
    target: terraform\cloudflare\cube-unit.net\domain
    aws_region: ap-northeast-1
    terraform_plan_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_plan
    terraform_apply_config:
      aws_assume_role_arn: arn:aws:iam::158677943024:role/github_cube-unit.net_terraform_apply
